<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mailer Pro — Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="/css/style.css"> <!-- Link to external CSS -->
</head>
<body data-theme="light">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z"/><path d="m22 8-10 6L2 8"/></svg>
      </div>
      <h1>Mailer&nbsp;Pro</h1>
    </div>
    <nav class="nav">
      <a class="active" href="#overview" data-section="overview" title="Overview">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3v18h18"/><path d="M7 13l3-3 3 3 6-6"/></svg>
        <span>Overview</span>
      </a>
      <a href="#send" data-section="send" title="Send Email">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m22 2-7 20-4-9-9-4 20-7z"/></svg>
        <span>Send Email</span>
      </a>
      <a href="#logs" data-section="logs" title="Email Logs">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="16" rx="2"/><path d="M7 8h10M7 12h10M7 16h6"/></svg>
        <span>Logs</span>
      </a>
      <a href="#limit" data-section="limit" title="Daily Limit">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/><path d="M12 7v6l4 2"/></svg>
        <span>Daily Limit</span>
      </a>
    </nav>
    <div class="footer">© 2025 • v1.0</div>
  </aside>

  <!-- Main Content -->
  <div>
    <!-- Topbar -->
    <div class="topbar">
      <div style="display:flex; align-items:center; gap:14px">
        <h2 style="margin:0;font-size:20px;font-weight:800">Dashboard</h2>
        <span style="color:var(--muted); font-weight:600" id="todayDate"></span>
      </div>
      <div class="cap">
        <div class="search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="7"/><path d="m21 21-4.35-4.35"/></svg>
          <input id="search" placeholder="Search logs, recipients, subjects…"/>
        </div>
        <button id="toggleTheme" class="btn ghost toggle" title="Toggle theme">
            <svg id="theme-icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/></svg>
            <svg id="theme-icon-moon" style="display:none;" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
        </button>
        <button class="btn" id="createCampaignBtn">Create Campaign</button>
      </div>
    </div>

    <main>
      <!-- Overview Section -->
      <section id="section-overview" class="grid"> <!-- Removed margin-bottom:18px here -->
        <!-- Stat cards & Daily Sends chart in the same row -->
        <div class="card pad" style="grid-column:span 3">
          <div class="stat">
            <div class="i"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="m22 2-7 20-4-9-9-4 20-7z"/></svg></div>
            <div>
              <h3>Sent Today</h3>
              <div class="value" id="overviewSentCount">0</div>
            </div>
          </div>
        </div>
        <div class="card pad" style="grid-column:span 3">
          <div class="stat">
            <div class="i"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20V10"/><path d="M18 20V4"/><path d="M6 20v-4"/></svg></div>
            <div>
              <h3>Remaining Today</h3>
              <div class="value" id="overviewRemainingCount">0</div>
            </div>
          </div>
        </div>
        <div class="card pad" style="grid-column:span 6"> <!-- Adjusted to span 6 (6 + 3 + 3 = 12) -->
          <div class="panel-title"><h2>Daily Sends (Last 7 Days)</h2></div>
          <div class="chart-container">
            <canvas id="dailySendsChart"></canvas>
          </div>
        </div>

        <!-- Email Status chart as a full-width item below -->
        <div class="card pad" style="grid-column:span 12"> <!-- Adjusted to span 12 (full width) -->
          <div class="panel-title"><h2>Email Status Distribution</h2></div>
          <div class="chart-container">
            <canvas id="statusDistributionChart"></canvas>
          </div>
        </div>
      </section>

      <!-- Send Section -->
      <section id="section-send" class="grid" style="display:none">
        <div class="card pad" style="grid-column:span 12">
          <div class="panel-title"><h2>Compose Email</h2></div>
          <form id="sendMailForm">
            <div class="form-group">
                <label for="to">Recipient Email</label>
                <input type="email" id="to" name="to" required placeholder="user@example.com"/>
            </div>
            <div class="form-group">
                <label for="subject">Subject</label>
                <input type="text" id="subject" name="subject" required placeholder="Welcome to Mailer Pro"/>
            </div>
            <div class="form-group">
                <label for="body">Body</label>
                <textarea id="body" name="body" rows="8" required placeholder="Write your message here…"></textarea>
            </div>
            <div style="display:flex; gap:10px; justify-content:flex-end">
              <button type="reset" class="btn ghost">Reset</button>
              <button type="submit" class="btn">Send Email</button>
            </div>
          </form>
          <div id="mailMessage" class="message-area" style="display: none;"></div>
        </div>
      </section>

      <!-- Logs Section -->
      <section id="section-logs" class="grid" style="display:none">
        <div class="card pad" style="grid-column:span 12">
          <div class="panel-title">
            <h2>Email Logs</h2>
            <input type="date" id="logDate" class="form-group" style="padding: 8px; border-radius: 8px; border: 1px solid var(--border); background-color: var(--bg);">
          </div>
          <table class="table" id="logsTable">
            <thead><tr><th>Recipient</th><th>Subject</th><th>Result</th><th>Date</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <!-- Limit Section -->
      <section id="section-limit" class="grid" style="display:none">
        <div class="card pad" style="grid-column:span 12">
          <div class="panel-title"><h2>Daily Mail Limit</h2></div>
          <div id="limitWrap" style="display:grid; gap:12px">
            <div style="display:flex; align-items:center; gap:12px">
              <div class="progress-container">
                <div id="limitBar"></div>
              </div>
              <strong id="limitText">0 / 0</strong>
            </div>
            <small style="color:var(--muted)">Mail sending will pause automatically after reaching 2,000 messages within 24 hours.</small>
          </div>
        </div>
      </section>
    </main>
  </div>
  <!-- Modal for sending an email -->
  <div id="sendEmailModal" class="modal-overlay">
      <div class="modal">
          <div class="modal-header">
              <h2>Compose Email</h2>
              <button class="close-btn" id="modalCloseBtn">&times;</button>
          </div>
          <form id="modalSendMailForm" class="modal-form">
              <div class="form-group">
                  <label for="modalTo">Recipient Email</label>
                  <input type="email" id="modalTo" name="to" required placeholder="user@example.com"/>
              </div>
              <div class="form-group">
                  <label for="modalSubject">Subject</label>
                  <input type="text" id="modalSubject" name="subject" required placeholder="Welcome to Mailer Pro"/>
              </div>
              <div class="form-group">
                  <label for="modalBody">Body</label>
                  <textarea id="modalBody" name="body" rows="8" required placeholder="Write your message here…"></textarea>
              </div>
              <div style="display:flex; justify-content:flex-end; gap:10px;">
                  <button type="reset" class="btn ghost">Reset</button>
                  <button type="submit" class="btn">Send Email</button>
              </div>
          </form>
          <div id="modalMailMessage" class="message-area"></div>
      </div>
  </div>

  <script src="/js/script.js"></script>
</body>
</html>